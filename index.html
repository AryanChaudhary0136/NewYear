<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>New Year Story</title>

<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@600&family=Playfair+Display:ital,wght@1,500&family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<style>
:root { --gold:#f5c542; }

*{
  box-sizing:border-box;
}

body{
  margin:0;
  min-height:100vh;
  background:#000;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:Poppins,sans-serif;
}

/* FULL RESPONSIVE APP */
.app{
  width:100%;
  max-width:420px;
  height:100vh;
  max-height:100vh;
  display:flex;
  flex-direction:column;
  justify-content:center;
}

/* STORY RESPONSIVE */
.story{
  position:relative;
  width:100%;
  height:100%;
  max-height:100vh;
  aspect-ratio:9/16;
  margin:auto;
  border-radius:18px;
  overflow:hidden;
  background:url("bgnw.jpg") center/cover no-repeat;
  box-shadow:0 20px 40px rgba(0,0,0,.6);
}

/* Desktop fix */
@media (min-width: 768px){
  .app{
    max-width:380px;
    height:90vh;
  }
}

/* Overlay */
.story::before{
  content:"";
  position:absolute;
  inset:0;
  background:linear-gradient(
    to bottom,
    rgba(0,0,0,.25),
    rgba(0,0,0,.65)
  );
  z-index:1;
}

/* Canvas */
#fw{
  position:absolute;
  inset:0;
  z-index:2;
  pointer-events:none;
}

/* Content */
.content{
  position:relative;
  z-index:3;
  height:100%;
  padding:20px;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
}

/* Image */
.photo{
  width:min(60vw,220px);
  height:min(60vw,220px);
  border-radius:18px;
  background:rgba(255,255,255,.08);
  border:3px solid var(--gold);
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
}

.photo img{
  width:100%;
  height:100%;
  object-fit:contain;
  background:#000;
}

/* Text */
.text{
  text-align:center;
  margin-top:22px;
}

.text h1{
  margin:0;
  font-family:'Cinzel',serif;
  font-size:clamp(26px,6vw,38px);
  letter-spacing:2px;
  color:var(--gold);
  text-shadow:0 2px 8px rgba(0,0,0,.6);
}

.quote{
  margin-top:12px;
  font-family:'Playfair Display',serif;
  font-size:clamp(16px,4.5vw,22px);
  font-style:italic;
}

.name{
  margin-top:12px;
  font-weight:600;
}

/* Controls */
.controls{
  margin-top:10px;
  padding:14px;
  background:rgba(255,255,255,.06);
  border-radius:14px;
}

.controls input,
.controls select,
.controls button{
  width:100%;
  padding:12px;
  margin-top:10px;
  border-radius:8px;
  border:none;
  font-size:15px;
}

.controls input[type=file]{ background:#fff; }

.controls button{
  background:var(--gold);
  font-weight:600;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="app">

  <div class="story" id="story">
    <canvas id="fw"></canvas>

    <div class="content">
      <div class="photo">
        <img id="preview">
      </div>

      <div class="text">
        <h1>New Year 2026</h1>
        <div class="quote" id="quoteText"></div>
        <div class="name" id="nameText"></div>
      </div>
    </div>
  </div>

  <div class="controls">
    <input type="file" accept="image/*" id="imageInput">
    <input type="text" placeholder="Enter your name" id="nameInput">
    <select id="quoteSelect"></select>
    <button id="downloadBtn">Download Story</button>
  </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<script>
document.addEventListener("DOMContentLoaded",()=>{

const story=document.getElementById("story");
const preview=document.getElementById("preview");
const nameText=document.getElementById("nameText");
const imageInput=document.getElementById("imageInput");
const nameInput=document.getElementById("nameInput");
const quoteSelect=document.getElementById("quoteSelect");
const quoteText=document.getElementById("quoteText");

/* Image upload */
imageInput.addEventListener("change",e=>{
  const f=e.target.files[0];
  if(!f) return;
  const r=new FileReader();
  r.onload=ev=>preview.src=ev.target.result;
  r.readAsDataURL(f);
});

/* Name */
nameInput.addEventListener("input",()=>{
  nameText.textContent=nameInput.value?"â€” "+nameInput.value:"";
});

/* Quotes */
const quotes=[
  "New year, new mindset, new results.",
  "A fresh year is a fresh chance to become unstoppable.",
  "Leave the past. Build the future.",
  "365 new chances start now.",
  "Turn your dreams into plans this year."
];

quotes.forEach(q=>{
  const o=document.createElement("option");
  o.value=q;o.textContent=q;
  quoteSelect.appendChild(o);
});

quoteSelect.value=quotes[0];
quoteText.textContent=quotes[0];

quoteSelect.addEventListener("change",()=>{
  quoteText.textContent=quoteSelect.value;
});

/* Canvas resize fix */
const canvas=document.getElementById("fw");
const ctx=canvas.getContext("2d");

function resizeCanvas(){
  canvas.width=story.clientWidth;
  canvas.height=story.clientHeight;
}
resizeCanvas();
window.addEventListener("resize",resizeCanvas);

});
</script>

</body>
</html>